
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>基本概念 &mdash; ODPS 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="ODPS 1.0 documentation" href="../../index.html" />
    <link rel="up" title="ODPS XLab/XLib" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="odps_xlib_basic_stat.html" title="基本统计"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="odps_xlib_pre.html" title="简介"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">ODPS 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">ODPS XLab/XLib</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>基本概念<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>XLab涉及这些概念：表(table)和分区(partition)、XLib稠密矩阵表、XLib稀疏矩阵表、三元组表、索引三元组表、KV表、索引KV表、表达式和脚本语言。本章节将简要介绍这些概念。</p>
<p>表(table)、XLib稠密矩阵表、XLib稀疏矩阵表、三元组表、索引三元组表、KV表和索引KV表，这些表间可以相互转换，XLab提供了转换界面和函数，详见&#8221;格式转换&#8221;章节。</p>
<div class="section" id="xlib-basic-tbl">
<span id="id2"></span><h2>表和分区<a class="headerlink" href="#xlib-basic-tbl" title="Permalink to this headline">¶</a></h2>
<p>XLab/XLib中提到的表(table)和分区(partition)均是指ODPS的表(table)和分区(partition)。</p>
<p>示例，表(Table)table_4x4，4行4列，如下图：</p>
<img alt="../../_images/table_4x4.jpg" src="../../_images/table_4x4.jpg" style="width: 550px;" />
</div>
<div class="section" id="xlib">
<span id="xlib-basic-dense-tbl"></span><h2>XLib稠密矩阵表<a class="headerlink" href="#xlib" title="Permalink to this headline">¶</a></h2>
<p>稠密矩阵是指非0元素占所有元素比例较大的矩阵。XLib稠密矩阵表是指存储稠密矩阵的Odps表。我们用四个分区来对其进行定义和描述XLib稠密矩阵表。XLib稠密矩阵表，包括四个分区：</p>
<ul class="simple">
<li>matrixconf：矩阵类型为1，代表稠密矩阵；</li>
<li>matrixdata：按先行后列存储全部数据；</li>
<li>matrixrow：空；</li>
<li>matrixcol：空。</li>
</ul>
<p>示例，XLib稠密矩阵表table2dense_martix_4x4(与表table_4x4对应)：</p>
<ul class="simple">
<li>matrixconf：矩阵类型为1，代表稠密矩阵，如下图：</li>
</ul>
<img alt="../../_images/table2dense_martix_4x4_conf.jpg" src="../../_images/table2dense_martix_4x4_conf.jpg" style="width: 450px; height: 250px;" />
<ul class="simple">
<li>matrixdata：按先行后列存储全部数据，如下图：</li>
</ul>
<img alt="../../_images/table2dense_martix_4x4_data.jpg" src="../../_images/table2dense_martix_4x4_data.jpg" style="width: 450px; height: 250px;" />
<ul class="simple">
<li>matrixrow：空，如下图：</li>
</ul>
<img alt="../../_images/table2dense_martix_4x4_row.jpg" src="../../_images/table2dense_martix_4x4_row.jpg" style="width: 450px; height: 250px;" />
<ul class="simple">
<li>matrixcol：空，如下图：</li>
</ul>
<img alt="../../_images/table2dense_martix_4x4_col.jpg" src="../../_images/table2dense_martix_4x4_col.jpg" style="width: 450px; height: 250px;" />
</div>
<div class="section" id="xlib-basic-sparse-tbl">
<span id="id3"></span><h2>Xlib稀疏矩阵表<a class="headerlink" href="#xlib-basic-sparse-tbl" title="Permalink to this headline">¶</a></h2>
<p>稀疏矩阵是指非零元素的个数远远小于矩阵元素的总数，并且非零元素的分布没有规律的矩阵。XLib稀疏矩阵表是指存储稀疏矩阵的Odps表。XLib稀疏矩阵表包括四个分区：</p>
<ul class="simple">
<li>matrixconf：矩阵类型为3，代表稀疏矩阵；</li>
<li>matrixdata：按先行后列存储全部数据；</li>
<li>matrixrow：存储每一行的开头在matrixdata文件里的偏移；</li>
<li>matrixcol：存储matrixdata文件里每个非零元素的列指标。</li>
</ul>
<p>示例，table2sparse_martix_4x4(与表table_4x4对应)：</p>
<ul class="simple">
<li>matrixconf：矩阵类型为3，代表稀疏矩阵，如下图：</li>
</ul>
<img alt="../../_images/table2sparse_martix_4x4_conf.jpg" src="../../_images/table2sparse_martix_4x4_conf.jpg" style="width: 450px; height: 250px;" />
<ul class="simple">
<li>matrixdata：按先行后列存储全部数据，如下图：</li>
</ul>
<img alt="../../_images/table2sparse_martix_4x4_data.jpg" src="../../_images/table2sparse_martix_4x4_data.jpg" style="width: 450px; height: 250px;" />
<ul class="simple">
<li>matrixrow：存储每一行的开头在matrixdata文件里的偏移，如下图：</li>
</ul>
<img alt="../../_images/table2sparse_martix_4x4_row.jpg" src="../../_images/table2sparse_martix_4x4_row.jpg" style="width: 450px; height: 250px;" />
<ul class="simple">
<li>matrixcol：存储matrixdata文件里每个非零元素的列指标，如下图：</li>
</ul>
<img alt="../../_images/table2sparse_martix_4x4_col.jpg" src="../../_images/table2sparse_martix_4x4_col.jpg" style="width: 450px; height: 250px;" />
</div>
<div class="section" id="xlib-basic-tuple-tbl">
<span id="id4"></span><h2>三元组表<a class="headerlink" href="#xlib-basic-tuple-tbl" title="Permalink to this headline">¶</a></h2>
<p>三元组表是用三元组的形式表示稀疏矩阵，三元组表一共有三列，分别表示行，列，值。其中值的类型为Double或Long。 例如表示(用户，电影，打分)， 数据应该是(&#8220;小明&#8221;，&#8221;肖申克&#8221;， 9)。</p>
<p>示例，三元组表sparse_martix_4x4_triple(与XLib稀疏矩阵表table2sparse_martix_4x4)，存储的是稀疏矩阵的非零元素的行名、列名及值，如下图：</p>
<img alt="../../_images/sparse_martix_4x4_triple.jpg" src="../../_images/sparse_martix_4x4_triple.jpg" style="width: 550px;" />
<p>行名与行下标的映射表rowmap，它共两列，存储行下标与对应的行名，如下图：</p>
<img alt="../../_images/rowmap.jpg" src="../../_images/rowmap.jpg" style="width: 550px;" />
<p>列名与列下标的映射表colmap，它共两列，存储列下标与对应的列名，如下图：</p>
<img alt="../../_images/colmap.jpg" src="../../_images/colmap.jpg" style="width: 550px;" />
</div>
<div class="section" id="xlib-basic-index-tuple-tbl">
<span id="id5"></span><h2>索引三元组表<a class="headerlink" href="#xlib-basic-index-tuple-tbl" title="Permalink to this headline">¶</a></h2>
<p>索引三元组表是三元组表的一种特殊形式，如果三元组表中行和列是索引，则是索引三元组表。 索引三元组表的类型是(Long， Long， Double|Long)，其中行索引和列索引的小标都是从0开始的。例如(用户id， 电影id， 打分)，数据格式是(1, 12， 9)。</p>
<p>示例，索引三元组表sparse_martix_4x4_index_triple(与XLib稀疏矩阵表table2sparse_martix_4x4相对应)，存储的是稀疏矩阵的非零元素的行下标、列下表以及非零值，如下图：</p>
<img alt="../../_images/sparse_martix_4x4_index_triple.jpg" src="../../_images/sparse_martix_4x4_index_triple.jpg" style="width: 550px;" />
</div>
<div class="section" id="kv">
<span id="xlib-basic-kv-tbl"></span><h2>KV表<a class="headerlink" href="#kv" title="Permalink to this headline">¶</a></h2>
<p>KV表是表里每个数据字段格式都是key：value，key：value…的形式，其中key，value之间的分隔符和多对KV之间的分隔符可以自定义。key是指列名，value是指存储在该行key列的元素值。</p>
<ul class="simple">
<li>KV表的列可为单列，也可为多列，同一行，各列的KV对不能重复。</li>
<li>对于一个KV表，需要有相对应的map表才能完整的表示这个数据。</li>
</ul>
<p>map表有以下特征：</p>
<ul class="simple">
<li>由两列组成，一列为string类型，表示列名。另一列为bigint类型，表示列号。</li>
<li>和kv表成对出现。</li>
<li>map表中的列名对应于KV表中的key。</li>
</ul>
<p>示例1：KV对</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">col1</span><span class="p">:</span><span class="mi">1</span>  <span class="n">col2</span><span class="p">:</span><span class="mi">2</span>  <span class="n">col3</span><span class="p">:</span><span class="mi">3</span>
</pre></div>
</div>
<ul class="simple">
<li>col1、col2、col3是key，代表列名。</li>
<li>1、2、3是value，代表key对应的值。</li>
</ul>
<p>示例2：KV表</p>
<p>KV表为两列kvstr1，kvstr2的示例，如下图：</p>
<img alt="../../_images/kv_table1.jpg" src="../../_images/kv_table1.jpg" />
<p>选中单元格的数据(col1:1,col2:2)说明：</p>
<ul class="simple">
<li>KV对是由,分割；</li>
<li>col1:1代表第1行col1列的值为1；</li>
<li>col2:2代表第1行col2列的值为2。</li>
</ul>
<p>和KV表中例子对应的map表为：</p>
<img alt="../../_images/map_table1.png" src="../../_images/map_table1.png" />
<p>KV表加上map表即可表示一个完整的矩阵，组合KV表和map表中的两个例子，矩阵为：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="21%" />
<col width="21%" />
<col width="21%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">col1</th>
<th class="head">col2</th>
<th class="head">col3</th>
<th class="head">col4</th>
<th class="head">col5</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>2</td>
<td>3</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td>2</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>0</td>
<td>0</td>
<td>2</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>示例3，KV表dense_martix_4x4_kv(与XLib稠密矩阵表table2dense_martix_4x4和列下标列名映射表colmap相对应)，如下图：</p>
<img alt="../../_images/dense_martix_4x4_kv.jpg" src="../../_images/dense_martix_4x4_kv.jpg" style="width: 550px;" />
<p>选中单元格元素：列0:13.5800000000000001,列1:0,列2:0,列3:49.6000000000000014, 代表第0行的四列元素，KV对间用,分割。列0:13.5800000000000001代表一个KV对，key为列0，value为13.5800000000000001，这个KV对代表第0行的列0列的值为13.5800000000000001。</p>
<p>示例4，KV表sparse_martix_4x4_kv(与XLib稀疏矩阵表table2sparse_martix_4x4和列下标列名映射表colmap相对应)，如下图：</p>
<img alt="../../_images/sparse_martix_4x4_kv.jpg" src="../../_images/sparse_martix_4x4_kv.jpg" style="width: 550px;" />
</div>
<div class="section" id="xlib-basic-idx-kv-tbl">
<span id="id6"></span><h2>索引KV表<a class="headerlink" href="#xlib-basic-idx-kv-tbl" title="Permalink to this headline">¶</a></h2>
<p>KV表里如果key是索引id，则是索引KV表。索引KV表不需要对应map表。</p>
<p>示例1，索引KV对：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span><span class="p">:</span><span class="n">ab</span>  <span class="mi">2</span><span class="p">:</span><span class="n">bc</span>  <span class="mi">3</span><span class="p">:</span><span class="n">cd</span>
</pre></div>
</div>
<ul class="simple">
<li>1、2、3是key，代表列下标。</li>
<li>ab、bc、cd是value，代表key对应的值。</li>
</ul>
<p>示例2，索引KV表dense_martix_4x4_kv_index(与XLib稠密矩阵表table2dense_martix_4x4相对应)，如下图：</p>
<img alt="../../_images/dense_martix_4x4_kv_index.jpg" src="../../_images/dense_martix_4x4_kv_index.jpg" style="width: 550px;" />
<p>选中单元格元素：0:13.5800000000000001,1:0,2:0,3:49.6000000000000014, 代表第0行的四列元素，KV对间用,分割。 0:13.5800000000000001代表一个KV对，key为0，value为13.5800000000000001，这个KV对代表第0行的第0列的值为13.5800000000000001。</p>
<p>示例3，索引KV表sparse_martix_4x4_kv_index (与XLib稀疏矩阵表table2sparse_martix_4x4对应)，如下图：</p>
<img alt="../../_images/sparse_martix_4x4_kv_index.jpg" src="../../_images/sparse_martix_4x4_kv_index.jpg" style="width: 550px;" />
</div>
<div class="section" id="id7">
<h2>表达式<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>Xlab提供了一些表达式与函数，方便用户在脚本和界面中使用，包括:</p>
<div class="highlight-python"><pre>IN,RLIKE,LIKE,+,-,*,/,%,^,=,==,!=,&lt;&gt;,IS NULL,IS NOT NULL , &lt;, &lt;=, &gt;, &gt;=, &amp;&amp;, AND, ||, OR, !, NOT, +, -,&amp;,|,&lt;&lt;,&gt;&gt;,reverse(),log(),sqrt(),abs(),trim(),length(),lengthb(),char_matchcount(),chr(),is_encoding(),keyvalue(),md5(),get_idcard_age(),get_idcard_birthday(),get_idcard_sex(),regexp_extract(),regexp_instr(),regexp_replace(),regexp_substr(),regexp_count(),split_part(),tolower(),toupper(),to_char(),log10(),sin(),cos(),tan(),cot(),asin(),acos(),atan(),acot(),ceil(),floor(),round(),trunc(),isdate(),instr(),left(),right(),repeat(),substr(),replace(),insert(),concat(),cast(),dateadd(),datediff(),datepart(),datetrunc(),from_unixtime(),lastday(),getdate(),unique_id(),uuid(),to_date(),unix_timestamp(),weekday(),weekofyear(),decode(),conv(),cosh(),sinh(),tanh(),exp(),rand(),ln()</pre>
</div>
<p>表达式及函数的使用说明，详见附录。</p>
</div>
<div class="section" id="id8">
<h2>脚本语言<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>我们使用Python作为脚本语言，详细说明可参考Python的简明教程。</p>
<p>这里我们摘要列出最基本的内容，方便用户快速入门。</p>
<dl class="docutils">
<dt>注意事项：</dt>
<dd><ul class="first last simple">
<li>任何在#符号右面的内容都是注释。</li>
</ul>
</dd>
</dl>
<div class="section" id="id9">
<h3>字符串<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>使用单引号(&#8216;)</li>
</ul>
<blockquote>
<div>你可以用单引号指示字符串，就如同&#8217;Quote me on this&#8217;这样。所有的空白，即空格和制表符都照原样保留。</div></blockquote>
<ul class="simple">
<li>使用双引号(&#8221;)</li>
</ul>
<blockquote>
<div>在双引号中的字符串与单引号中的字符串的使用完全相同，例如&#8221;What&#8217;s your name?&#8221;。</div></blockquote>
<ul class="simple">
<li>使用三引号(&#8216;&#8217;&#8216;或&#8221;&#8220;&#8221;)</li>
</ul>
<p>利用三引号，你可以指示一个多行的字符串。你可以在三引号中自由的使用单引号和双引号。</p>
<p>示例：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&#39;&#39;&#39;This is a multi-line string. This is the first line.</span>
<span class="sd">This is the second line.</span>
<span class="sd">&quot;What&#39;s your name?,&quot; I asked.</span>
<span class="sd">He said &quot;Bond, James Bond.&quot;</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>转义符 假设你想要在一个字符串中包含一个单引号(&#8216;)，那么你该怎么指示这个字符串？例如，这个字符串是What&#8217;s your name?。你肯定不会用&#8217;What&#8217;s your name?&#8217;来指示它，因为Python会弄不明白这个字符串从何处开始，何处结束。所以，你需要指明单引号而不是字符串的结尾。可以通过 转义符 来完成这个任务。你用&#8217;来指示单引号——注意这个反斜杠。现在你可以把字符串表示为&#8217;What&#8217;s your name?&#8217;。</li>
<li>另一个表示这个特别的字符串的方法是&#8221;What&#8217;s your name?&#8221;，即用双引号。类似地，要在双引号字符串中使用双引号本身的时候，也可以借助于转义符。另外，你可以用转义符\来指示反斜杠本身。</li>
<li>在一个字符串中，行末的单独一个反斜杠表示字符串在下一行继续，而不是开始一个新的行。</li>
</ul>
<p>示例：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&quot;This is the first sentence.</span><span class="se">\</span>
<span class="s">This is the second sentence.&quot;</span>
</pre></div>
</div>
<p>等价于</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&quot;This is the first sentence. This is the second sentence.&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h3>标识符的命名<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>变量是标识符的例子。 标识符 是用来标识 某样东西 的名字。在命名标识符的时候，你要遵循这些规则：</p>
<ul class="simple">
<li>标识符的第一个字符必须是字母表中的字母(大写或小写)或者一个下划线(‘ _ ’)。</li>
<li>标识符名称的其他部分可以由字母(大写或小写)、下划线(‘ _ ’)或数字(0-9)组成。</li>
<li>标识符名称是对大小写敏感的。例如，myname和myName不是一个标识符。注意前者中的小写n和后者中的大写N。</li>
<li>有效 标识符名称的例子有i、__my_name、name_23和a1b2_c3。</li>
<li>无效 标识符名称的例子有2things、this is spaced out和my-name。</li>
</ul>
</div>
<div class="section" id="id11">
<h3>变量<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>我们看一下如何使用变量和字面意义上的常量。</p>
<p>示例：</p>
<div class="highlight-python"><pre># Filename : var.py
i = 5
print i
i = i + 1
print i

s = '''This is a multi-line string.
This is the second line.'''
print s


输出
5
6
This is a multi-line string.
This is the second line.</pre>
</div>
<p>下面来说明一下这个程序如何工作。首先我们使用赋值运算符(=)把一个字面意义上的常数5赋给变量i。这一行称为一个语句。语句声明需要做某件事情，在这个地方我们把变量名i与值5连接在一起。接下来，我们用print语句打印i的值，就是把变量的值打印在屏幕上。
然后我们对i中存储的值加1，再把它存回i。我们打印它时，得到期望的值6。</p>
<p>类似地，我们把一个字面意义上的字符串赋给变量s然后打印它。</p>
<p>注意事项：</p>
<blockquote>
<div><ul class="simple">
<li>使用变量时只需要给它们赋一个值，不需要声明或定义数据类型。</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id12">
<h3>逻辑行与物理行<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>物理行是你在编写程序时所看见的。逻辑行是Python看见的单个语句。Python假定每个物理行 对应一个逻辑行。
逻辑行的例子如print &#8216;Hello World&#8217;这样的语句——如果它本身就是一行(就像你在编辑器中看到的那样)，那么它也是一个物理行。
默认地，Python希望每行都只使用一个语句，这样使得代码更加易读。</p>
<p>若要在多个物理行中写一个逻辑行，可以使用反斜杠。</p>
<p>示例：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="s">&#39;This is a string. </span><span class="se">\</span>
<span class="s">This continues the string.&#39;</span>
</pre></div>
</div>
<p>注意事项：</p>
<blockquote>
<div><ul class="simple">
<li>如果你想要在一个物理行中使用多于一个逻辑行，那么你需要使用分号(;)来特别地标明这种用法。分号表示一个逻辑行/语句的结束。</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id13">
<h3>控制流<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>在Python中有三种控制流语句——if、for和while。</p>
</div>
<div class="section" id="if">
<h3>if语句<a class="headerlink" href="#if" title="Permalink to this headline">¶</a></h3>
<p>使用if语句的示例：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">number</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">guess</span> <span class="o">=</span> <span class="mi">12</span>

<span class="k">if</span> <span class="n">guess</span> <span class="o">==</span> <span class="n">number</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Congratulations, you guessed it.&#39;</span> <span class="c"># New block starts here</span>
    <span class="k">print</span> <span class="s">&quot;(but you do not win any prizes!)&quot;</span> <span class="c"># New block ends here</span>
<span class="k">elif</span> <span class="n">guess</span> <span class="o">&lt;</span> <span class="n">number</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;No, it is a little higher than that&#39;</span> <span class="c"># Another block</span>
    <span class="c"># You can do whatever you want in a block ...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;No, it is a little lower than that&#39;</span>
    <span class="c"># you must have guess &gt; number to reach here</span>
</pre></div>
</div>
<p>注意事项：</p>
<blockquote>
<div><ul class="simple">
<li>我们使用了缩进层次来告诉Python每个语句分别属于哪一个块。这就是为什么缩进在Python如此重要的原因。我希望你能够坚持&#8221;每个缩进层一个制表符&#8221;的规则。</li>
<li>if语句在结尾处包含一个冒号——我们通过它告诉Python下面跟着一个语句块。我们在这里使用的是elif从句，它事实上把两个相关联的if else-if else语句合并为一个if-elif-else语句。elif和else从句都必须在逻辑行结尾处有一个冒号，下面跟着一个相应的语句块(当然还包括正确的缩进)。</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="while">
<h3>while语句<a class="headerlink" href="#while" title="Permalink to this headline">¶</a></h3>
<p>只要在一个条件为真的情况下，while语句允许你重复执行一块语句。while语句是所谓 循环 语句的一个例子。</p>
<p>示例：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">number</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">guess</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="n">guess</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">guess</span> <span class="o">==</span> <span class="n">number</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;Congratulations, you guessed it.&#39;</span>
        <span class="n">running</span> <span class="o">=</span> <span class="bp">False</span> <span class="c"># this causes the while loop to stop</span>
    <span class="k">elif</span> <span class="n">guess</span> <span class="o">&lt;</span> <span class="n">number</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;No, it is a little higher than that&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;No, it is a little lower than that&#39;</span>

<span class="k">print</span> <span class="s">&#39;Done&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="for">
<h3>for循环<a class="headerlink" href="#for" title="Permalink to this headline">¶</a></h3>
<p>for..in是另外一个循环语句。在C/C++中，如果你想要写for (int i = 0; i &lt; 5; i++)，那么用Python，你写成for i in range(0,5)。</p>
<p>示例：</p>
<div class="highlight-python"><pre>for i in range(1, 5):
    print i

输出
1
2
3
4</pre>
</div>
</div>
<div class="section" id="break">
<h3>break语句<a class="headerlink" href="#break" title="Permalink to this headline">¶</a></h3>
<p>break语句是用来 终止 for或while循环语句的，即哪怕循环条件没有称为False或序列还没有被完全递归，也停止执行循环语句。</p>
</div>
<div class="section" id="continue">
<h3>continue语句<a class="headerlink" href="#continue" title="Permalink to this headline">¶</a></h3>
<p>continue语句被用来告诉Python跳过当前for或while循环块中的剩余语句，然后 继续 进行下一轮循环。</p>
</div>
<div class="section" id="id14">
<h3>函数<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>函数是重用的程序段。它们允许你给一块语句一个名称，然后你可以在你的程序的任何地方使用这个名称任意多次地运行这个语句块。这被称为 调用 函数。</p>
<p>函数通过def关键字定义。def关键字后跟一个函数的 标识符 名称，然后跟一对圆括号。圆括号之中可以包括一些变量名，该行以冒号结尾。接下来是一块语句，它们是函数体。</p>
<p>示例：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">sayHello</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&#39;Hello World!&#39;</span> <span class="c"># block belonging to the function</span>

<span class="n">sayHello</span><span class="p">()</span> <span class="c"># call the function</span>
</pre></div>
</div>
<p>参数在函数定义的圆括号对内指定，用逗号分割。当我们调用函数的时候，我们以同样的方式提供值。</p>
<p>示例：</p>
<div class="highlight-python"><pre>def printMax(a, b):
    if a &gt; b:
        print a, 'is maximum'
    else:
        print b, 'is maximum'

printMax(3, 4) # directly give literal values

x = 5
y = 7

printMax(x, y) # give variables as arguments

输出
4 is maximum
7 is maximum</pre>
</div>
<p>return语句用来从一个函数返回即跳出函数。我们也可选从函数返回一个值。</p>
<p>示例：</p>
<div class="highlight-python"><pre>def maximum(x, y):
    if x &gt; y:
        return x
    else:
        return y

print maximum(2, 3)

输出
3</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">基本概念</a><ul>
<li><a class="reference internal" href="#xlib-basic-tbl">表和分区</a></li>
<li><a class="reference internal" href="#xlib">XLib稠密矩阵表</a></li>
<li><a class="reference internal" href="#xlib-basic-sparse-tbl">Xlib稀疏矩阵表</a></li>
<li><a class="reference internal" href="#xlib-basic-tuple-tbl">三元组表</a></li>
<li><a class="reference internal" href="#xlib-basic-index-tuple-tbl">索引三元组表</a></li>
<li><a class="reference internal" href="#kv">KV表</a></li>
<li><a class="reference internal" href="#xlib-basic-idx-kv-tbl">索引KV表</a></li>
<li><a class="reference internal" href="#id7">表达式</a></li>
<li><a class="reference internal" href="#id8">脚本语言</a><ul>
<li><a class="reference internal" href="#id9">字符串</a></li>
<li><a class="reference internal" href="#id10">标识符的命名</a></li>
<li><a class="reference internal" href="#id11">变量</a></li>
<li><a class="reference internal" href="#id12">逻辑行与物理行</a></li>
<li><a class="reference internal" href="#id13">控制流</a></li>
<li><a class="reference internal" href="#if">if语句</a></li>
<li><a class="reference internal" href="#while">while语句</a></li>
<li><a class="reference internal" href="#for">for循环</a></li>
<li><a class="reference internal" href="#break">break语句</a></li>
<li><a class="reference internal" href="#continue">continue语句</a></li>
<li><a class="reference internal" href="#id14">函数</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="odps_xlib_basic_stat.html" title="基本统计"
             >next</a></li>
        <li class="right" >
          <a href="odps_xlib_pre.html" title="简介"
             >previous</a> |</li>
        <li><a href="../../index.html">ODPS 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >ODPS XLab/XLib</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright Alibaba 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  <!-- 请把脚本放到 body 元素内 -->
  </body>
</html>